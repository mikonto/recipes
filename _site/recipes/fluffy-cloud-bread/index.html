<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fluffy Cloud Bread | My Recipe Collection</title>
    <link rel="stylesheet" href="/recipes/css/style.css">
</head>
<body>
    <header class="site-header">
        <nav class="nav">
            <a href="/recipes/" class="nav-logo">My Recipes</a>
            <div class="nav-links">
                <a href="/recipes/">All Recipes</a>
                <a href="/recipes/shopping-list" class="shopping-list-link">
                    Shopping List
                    <span class="shopping-count" id="shopping-count"></span>
                </a>
                
                <div class="screen-toggle-nav">
                    <input type="checkbox" id="screenAwake" />
                    <label for="screenAwake">Keep screen on</label>
                </div>
                
            </div>
        </nav>
    </header>

    <main class="main-content">
        <article class="recipe">
    <header class="recipe-header">
        <h1 class="recipe-title">Fluffy Cloud Bread</h1>
        

        <div class="recipe-meta">
            
                <span class="meta-item">
                    <strong>Prep:</strong> 20 min
                </span>
            
            
                <span class="meta-item">
                    <strong>Cook:</strong> 25 min
                </span>
            
            
                <span class="meta-item">
                    <strong>Servings:</strong> 8
                </span>
            
        </div>

        
        <div class="recipe-tags">
            
                
            
                
                    <a href="/tags/bread/" class="tag">bread</a>
                
            
                
                    <a href="/tags/baking/" class="tag">baking</a>
                
            
        </div>
        

    </header>

    <div class="recipe-content">
        <section class="ingredients">
            <h2>Ingredients</h2>
            
                <ul class="ingredient-list">
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-1">
                            <label for="ing-1">300g bread flour (or plain flour)</label>
                            <button class="add-to-list" onclick="addToShoppingList('300g bread flour (or plain flour)')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-2">
                            <label for="ing-2">5g instant yeast (about 3/4 packet)</label>
                            <button class="add-to-list" onclick="addToShoppingList('5g instant yeast (about 3/4 packet)')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-3">
                            <label for="ing-3">2g baking powder (1/2 teaspoon)</label>
                            <button class="add-to-list" onclick="addToShoppingList('2g baking powder (1/2 teaspoon)')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-4">
                            <label for="ing-4">6g salt (1 teaspoon)</label>
                            <button class="add-to-list" onclick="addToShoppingList('6g salt (1 teaspoon)')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-5">
                            <label for="ing-5">25g sugar</label>
                            <button class="add-to-list" onclick="addToShoppingList('25g sugar')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-6">
                            <label for="ing-6">150ml AMA cooking cream (15% fat), cold</label>
                            <button class="add-to-list" onclick="addToShoppingList('150ml AMA cooking cream (15% fat), cold')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-7">
                            <label for="ing-7">2 large eggs, room temperature</label>
                            <button class="add-to-list" onclick="addToShoppingList('2 large eggs, room temperature')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-8">
                            <label for="ing-8">75ml whole milk (3.5% fat)</label>
                            <button class="add-to-list" onclick="addToShoppingList('75ml whole milk (3.5% fat)')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-9">
                            <label for="ing-9">45g butter, melted and cooled</label>
                            <button class="add-to-list" onclick="addToShoppingList('45g butter, melted and cooled')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-10">
                            <label for="ing-10">1 tablespoon neutral oil (15ml)</label>
                            <button class="add-to-list" onclick="addToShoppingList('1 tablespoon neutral oil (15ml)')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-11">
                            <label for="ing-11">1 teaspoon vanilla extract (optional)</label>
                            <button class="add-to-list" onclick="addToShoppingList('1 teaspoon vanilla extract (optional)')" title="Add to shopping list">+</button>
                        </li>
                    
                </ul>
            
        </section>

        
        <section class="instructions">
            <h2>Instructions</h2>
            <ol class="instruction-list">
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Prepare the cream: Place 150ml cold AMA cream in a chilled bowl. Whip with electric whisk until soft peaks form (leaves a trail when lifted). Set aside in refrigerator.">Prepare the cream: Place 150ml cold AMA cream in a chilled bowl. Whip with electric whisk until soft peaks form (leaves a trail when lifted). Set aside in refrigerator.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Mix dry ingredients: In a large bowl, whisk together 300g flour, 5g yeast, 2g baking powder, 6g salt, and 25g sugar until well combined.">Mix dry ingredients: In a large bowl, whisk together 300g flour, 5g yeast, 2g baking powder, 6g salt, and 25g sugar until well combined.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Prepare wet ingredients: In another bowl, whisk 2 eggs vigorously for 2 minutes until frothy. Add 75ml warm milk (30-35°C), 45g cooled melted butter, 15ml oil, and vanilla if using. Whisk until well combined.">Prepare wet ingredients: In another bowl, whisk 2 eggs vigorously for 2 minutes until frothy. Add 75ml warm milk (30-35°C), 45g cooled melted butter, 15ml oil, and vanilla if using. Whisk until well combined.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Combine: Pour the egg mixture into the dry ingredients. Mix with a wooden spoon just until it forms a shaggy, sticky dough.">Combine: Pour the egg mixture into the dry ingredients. Mix with a wooden spoon just until it forms a shaggy, sticky dough.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Fold in cream: Gently fold the whipped cream into the dough using wet hands or spatula. Use 10-15 folding motions - some cream streaks are fine.">Fold in cream: Gently fold the whipped cream into the dough using wet hands or spatula. Use 10-15 folding motions - some cream streaks are fine.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Gentle knead: With buttered hands, gently knead the dough in the bowl for 3-5 minutes. The dough will be soft and sticky - this is normal. This step develops gluten for better structure.">Gentle knead: With buttered hands, gently knead the dough in the bowl for 3-5 minutes. The dough will be soft and sticky - this is normal. This step develops gluten for better structure.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="First shaping: Line your porcelain dish with buttered baking paper. Transfer dough to dish, spreading gently with wet hands. Dough should fill about 1/3 of dish height.">First shaping: Line your porcelain dish with buttered baking paper. Transfer dough to dish, spreading gently with wet hands. Dough should fill about 1/3 of dish height.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Rise: Cover loosely with oiled plastic wrap. Let rise for 60-75 minutes until increased by 50-70% and looks puffy.">Rise: Cover loosely with oiled plastic wrap. Let rise for 60-75 minutes until increased by 50-70% and looks puffy.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Bake: Preheat oven to 180°C. Remove plastic wrap gently. Bake for 23-28 minutes until golden brown and springs back when touched. Internal temperature should reach 88-90°C.">Bake: Preheat oven to 180°C. Remove plastic wrap gently. Bake for 23-28 minutes until golden brown and springs back when touched. Internal temperature should reach 88-90°C.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Finish: Remove from oven, immediately brush top with melted butter. Cool in dish for 5 minutes, then lift out using paper. Cool on wire rack for 15 minutes before slicing.">Finish: Remove from oven, immediately brush top with melted butter. Cool in dish for 5 minutes, then lift out using paper. Cool on wire rack for 15 minutes before slicing.</span>
                    </li>
                
            </ol>
        </section>
        

        
        <section class="notes">
            <h2>Notes</h2>
            <div class="notes-content"><p>Key features for tender texture: Added oil for flexibility, reduced baking powder, gentle kneading step, shorter baking time, and butter brush at the end. The dough will be soft and sticky - this is normal and creates the fluffy texture.</p>
</div>
        </section>
        
    </div>

    <nav class="recipe-nav">
        <a href="/" class="btn btn-back">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
            </svg>
            Back to all recipes
        </a>
    </nav>
</article>

<script>
// Wake Lock API to keep screen on
let wakeLock = null;

async function requestWakeLock() {
    try {
        if ('wakeLock' in navigator) {
            wakeLock = await navigator.wakeLock.request('screen');
            console.log('Screen wake lock active');

            // Re-acquire lock if page becomes visible again
            document.addEventListener('visibilitychange', async () => {
                if (wakeLock !== null && document.visibilityState === 'visible') {
                    wakeLock = await navigator.wakeLock.request('screen');
                }
            });
        } else {
            console.log('Wake Lock API not supported');
            // Hide toggle if not supported
            document.querySelector('.screen-toggle').style.display = 'none';
        }
    } catch (err) {
        console.error(`Wake lock error: ${err.message}`);
    }
}

async function releaseWakeLock() {
    if (wakeLock !== null) {
        await wakeLock.release();
        wakeLock = null;
        console.log('Screen wake lock released');
    }
}

// Handle toggle
const screenToggle = document.getElementById('screenAwake');
if (screenToggle) {
    // Check if Wake Lock API is supported
    if (!('wakeLock' in navigator)) {
        document.querySelector('.screen-toggle').style.display = 'none';
    }

    screenToggle.addEventListener('change', async (e) => {
        if (e.target.checked) {
            await requestWakeLock();
        } else {
            await releaseWakeLock();
        }
    });
}

// Shopping list functionality for individual ingredients
function addToShoppingList(ingredient) {
    const recipeName = "Fluffy Cloud Bread";

    // Get existing list
    const list = JSON.parse(localStorage.getItem('shoppingList') || '{}');

    // Create unique key
    const key = `${recipeName}-${ingredient}`;

    // Get the button that was clicked
    const btn = event.target;

    if (list[key]) {
        // Already in list - show feedback
        btn.textContent = '✓';
        btn.classList.add('added');
        setTimeout(() => {
            btn.textContent = '+';
            btn.classList.remove('added');
        }, 1500);
    } else {
        // Add to list
        list[key] = {
            recipe: recipeName,
            ingredient: ingredient,
            checked: false
        };

        // Save updated list
        localStorage.setItem('shoppingList', JSON.stringify(list));

        // Show success feedback
        btn.textContent = '✓';
        btn.classList.add('added');

        setTimeout(() => {
            btn.textContent = '+';
            btn.classList.remove('added');
        }, 1500);

        // Update the count in navigation
        updateShoppingCount();
    }
}
</script>
    </main>

    <footer class="site-footer">
        <p>&copy; 2025 My Recipe Collection</p>
    </footer>

    <script>
    // Update shopping list count in navigation
    function updateShoppingCount() {
        const list = JSON.parse(localStorage.getItem('shoppingList') || '{}');
        const count = Object.keys(list).length;
        const countElement = document.getElementById('shopping-count');

        if (countElement) {
            if (count > 0) {
                countElement.textContent = count;
                countElement.style.display = 'inline-flex';
            } else {
                countElement.style.display = 'none';
            }
        }
    }

    // Update count on page load
    document.addEventListener('DOMContentLoaded', updateShoppingCount);

    // Listen for storage changes (updates from other tabs)
    window.addEventListener('storage', (e) => {
        if (e.key === 'shoppingList') {
            updateShoppingCount();
        }
    });
    </script>
</body>
</html>