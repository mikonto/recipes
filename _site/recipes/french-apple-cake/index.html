<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>French Apple Cake with Licor 43 | My Recipe Collection</title>
    <link rel="stylesheet" href="/recipes/css/style.css">
</head>
<body>
    <header class="site-header">
        <nav class="nav">
            <a href="/recipes/" class="nav-logo">Recipes</a>
            <div class="nav-right">
                
                <button class="screen-toggle-btn" id="screenToggle" aria-label="Keep screen on" title="Keep screen on">
                    <svg class="screen-icon screen-off" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <!-- Eye closed (screen sleep) -->
                        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5z" opacity="0.3"/>
                        <path d="M2 2L22 22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <svg class="screen-icon screen-on" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <!-- Eye open (screen awake) -->
                        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5z"/>
                        <circle cx="12" cy="12" r="3" fill="white"/>
                    </svg>
                </button>
                
                <button class="menu-toggle" id="menu-toggle" aria-label="Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="nav-links" id="nav-links">
                <a href="/recipes/">All Recipes</a>
                <a href="/recipes/shopping-list" class="shopping-list-link">
                    Shopping List
                    <span class="shopping-count" id="shopping-count"></span>
                </a>
                
                <button class="screen-toggle-btn desktop-only" id="screenToggleDesktop" aria-label="Keep screen on" title="Keep screen on">
                    <svg class="screen-icon screen-off" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <!-- Eye closed (screen sleep) -->
                        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5z" opacity="0.3"/>
                        <path d="M2 2L22 22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <svg class="screen-icon screen-on" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <!-- Eye open (screen awake) -->
                        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5z"/>
                        <circle cx="12" cy="12" r="3" fill="white"/>
                    </svg>
                </button>
                
            </div>
        </nav>
    </header>

    <main class="main-content">
        <article class="recipe">
    <header class="recipe-header">
        <h1 class="recipe-title">French Apple Cake with Licor 43</h1>
        

        <div class="recipe-meta">
            
                <span class="meta-item">
                    <strong>Prep:</strong> 20 min
                </span>
            
            
                <span class="meta-item">
                    <strong>Cook:</strong> 40 min
                </span>
            
            
                <span class="meta-item">
                    <strong>Servings:</strong> 8
                </span>
            
        </div>

        
        <div class="recipe-tags">
            
                
            
                
                    <a href="/tags/baking/" class="tag">baking</a>
                
            
                
                    <a href="/tags/dessert/" class="tag">dessert</a>
                
            
                
                    <a href="/tags/apples/" class="tag">apples</a>
                
            
        </div>
        

    </header>

    <div class="recipe-content">
        <section class="ingredients">
            <h2>Ingredients</h2>
            
                <ul class="ingredient-list">
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-1">
                            <label for="ing-1">125g plain flour</label>
                            <button class="add-to-list" onclick="addToShoppingList('125g plain flour')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-2">
                            <label for="ing-2">1 teaspoon baking powder</label>
                            <button class="add-to-list" onclick="addToShoppingList('1 teaspoon baking powder')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-3">
                            <label for="ing-3">¼ teaspoon salt</label>
                            <button class="add-to-list" onclick="addToShoppingList('¼ teaspoon salt')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-4">
                            <label for="ing-4">115g unsalted butter, room temperature</label>
                            <button class="add-to-list" onclick="addToShoppingList('115g unsalted butter, room temperature')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-5">
                            <label for="ing-5">135g white sugar, plus 1 tablespoon for sprinkling</label>
                            <button class="add-to-list" onclick="addToShoppingList('135g white sugar, plus 1 tablespoon for sprinkling')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-6">
                            <label for="ing-6">2 large eggs</label>
                            <button class="add-to-list" onclick="addToShoppingList('2 large eggs')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-7">
                            <label for="ing-7">1 teaspoon vanilla extract</label>
                            <button class="add-to-list" onclick="addToShoppingList('1 teaspoon vanilla extract')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-8">
                            <label for="ing-8">3 tablespoons Licor 43</label>
                            <button class="add-to-list" onclick="addToShoppingList('3 tablespoons Licor 43')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-9">
                            <label for="ing-9">2 baking apples (about 450-500g after peeling and coring), cut into 1cm cubes</label>
                            <button class="add-to-list" onclick="addToShoppingList('2 baking apples (about 450-500g after peeling and coring), cut into 1cm cubes')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-10">
                            <label for="ing-10">Icing sugar for dusting (optional)</label>
                            <button class="add-to-list" onclick="addToShoppingList('Icing sugar for dusting (optional)')" title="Add to shopping list">+</button>
                        </li>
                    
                </ul>
            
        </section>

        
        <section class="instructions">
            <h2>Instructions</h2>
            <ol class="instruction-list">
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Preheat the oven to 175°C and position a rack in the middle. Grease a 23cm springform tin or regular cake tin with butter or non-stick spray. If using a regular cake tin, line the bottom with baking paper and grease again.">Preheat the oven to 175°C and position a rack in the middle. Grease a 23cm springform tin or regular cake tin with butter or non-stick spray. If using a regular cake tin, line the bottom with baking paper and grease again.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="In a small bowl, whisk together the flour (125g), baking powder (1 teaspoon), and salt (¼ teaspoon).">In a small bowl, whisk together the flour (125g), baking powder (1 teaspoon), and salt (¼ teaspoon).</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Using a kitchen machine with whisk attachment, cream the butter (115g) and white sugar (135g) on medium speed until light and fluffy, about 3 minutes.">Using a kitchen machine with whisk attachment, cream the butter (115g) and white sugar (135g) on medium speed until light and fluffy, about 3 minutes.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Add the eggs (2), one at a time, beating well and scraping down the sides of the bowl after each addition.">Add the eggs (2), one at a time, beating well and scraping down the sides of the bowl after each addition.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Beat in the vanilla extract (1 teaspoon) and Licor 43 (3 tablespoons). The mixture may look slightly curdled at this point - this is normal.">Beat in the vanilla extract (1 teaspoon) and Licor 43 (3 tablespoons). The mixture may look slightly curdled at this point - this is normal.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Add the flour mixture to the butter mixture and mix on low speed until just combined. Do not overmix.">Add the flour mixture to the butter mixture and mix on low speed until just combined. Do not overmix.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Using a rubber spatula, fold in the chopped apples (450-500g, cut into 1cm cubes) by hand.">Using a rubber spatula, fold in the chopped apples (450-500g, cut into 1cm cubes) by hand.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Scrape the batter into the prepared tin (the batter will be quite fluid - this is normal). Level the top and sprinkle evenly with white sugar (1 tablespoon).">Scrape the batter into the prepared tin (the batter will be quite fluid - this is normal). Level the top and sprinkle evenly with white sugar (1 tablespoon).</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Bake for about 40 minutes, or until the cake is golden brown on top with a thin crispy layer and a skewer inserted into the centre comes out clean.">Bake for about 40 minutes, or until the cake is golden brown on top with a thin crispy layer and a skewer inserted into the centre comes out clean.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Allow the cake to cool on a rack in the tin. Once cooled slightly, run a knife around the edges. If using a springform tin, remove the sides. If using a regular tin, carefully invert the cake onto the rack, remove the baking paper, then flip right-side-up onto a serving plate.">Allow the cake to cool on a rack in the tin. Once cooled slightly, run a knife around the edges. If using a springform tin, remove the sides. If using a regular tin, carefully invert the cake onto the rack, remove the baking paper, then flip right-side-up onto a serving plate.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Dust with icing sugar using a fine sieve if desired. Serve warm or at room temperature.">Dust with icing sugar using a fine sieve if desired. Serve warm or at room temperature.</span>
                    </li>
                
            </ol>
        </section>
        

        
        <section class="notes">
            <h2>Notes</h2>
            <div class="notes-content"><p><strong>Serving Suggestions:</strong><br>
Delicious on its own or served with Greek yogurt (plain or sweetened with a bit of icing sugar and vanilla), vanilla ice cream, or whipped cream.</p>
<p><strong>Tips:</strong></p>
<ul>
<li>Use baking apples that hold their shape when cooked, such as Granny Smith, Honey Crisp, Pink Lady, Braeburn, or Jonagold</li>
<li>The fluid batter consistency is correct - it creates the tender, custardy texture</li>
<li>A thin crispy top and cracks on the surface are perfect signs of a well-baked cake</li>
<li>The cake keeps well at room temperature for up to 2 days</li>
<li>Can be frozen for up to 3 months - wrap tightly in foil once completely cooled</li>
</ul>
</div>
        </section>
        
    </div>

    <nav class="recipe-nav">
        <a href="/recipes/" class="btn btn-back">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
            </svg>
            Back to all recipes
        </a>
    </nav>
</article>

<script>
// Wake Lock API to keep screen on
let wakeLock = null;

async function requestWakeLock() {
    try {
        if ('wakeLock' in navigator) {
            wakeLock = await navigator.wakeLock.request('screen');
            console.log('Screen wake lock active');

            // Re-acquire lock if page becomes visible again
            document.addEventListener('visibilitychange', async () => {
                if (wakeLock !== null && document.visibilityState === 'visible') {
                    wakeLock = await navigator.wakeLock.request('screen');
                }
            });
        } else {
            console.log('Wake Lock API not supported');
            // Hide toggle if not supported
            const btn = document.getElementById('screenToggle');
            if (btn) btn.style.display = 'none';
        }
    } catch (err) {
        console.error(`Wake lock error: ${err.message}`);
    }
}

async function releaseWakeLock() {
    if (wakeLock !== null) {
        await wakeLock.release();
        wakeLock = null;
        console.log('Screen wake lock released');
    }
}

// Handle toggle buttons (both mobile and desktop)
function setupScreenToggle(buttonId) {
    const button = document.getElementById(buttonId);
    if (button) {
        // Check if Wake Lock API is supported
        if (!('wakeLock' in navigator)) {
            button.style.display = 'none';
            return;
        }

        button.addEventListener('click', async () => {
            const allButtons = document.querySelectorAll('.screen-toggle-btn');

            if (!button.classList.contains('active')) {
                await requestWakeLock();
                allButtons.forEach(btn => {
                    btn.classList.add('active');
                    btn.setAttribute('title', 'Turn off keep screen on');
                });
            } else {
                await releaseWakeLock();
                allButtons.forEach(btn => {
                    btn.classList.remove('active');
                    btn.setAttribute('title', 'Keep screen on');
                });
            }
        });
    }
}

// Setup both buttons
setupScreenToggle('screenToggle');
setupScreenToggle('screenToggleDesktop');

// Shopping list functionality for individual ingredients
function addToShoppingList(ingredient) {
    const recipeName = "French Apple Cake with Licor 43";

    // Get existing list
    const list = JSON.parse(localStorage.getItem('shoppingList') || '{}');

    // Create unique key
    const key = `${recipeName}-${ingredient}`;

    // Get the button that was clicked
    const btn = event.target;

    if (list[key]) {
        // Already in list - show feedback
        btn.textContent = '✓';
        btn.classList.add('added');
        setTimeout(() => {
            btn.textContent = '+';
            btn.classList.remove('added');
        }, 1500);
    } else {
        // Add to list
        list[key] = {
            recipe: recipeName,
            ingredient: ingredient,
            checked: false
        };

        // Save updated list
        localStorage.setItem('shoppingList', JSON.stringify(list));

        // Show success feedback
        btn.textContent = '✓';
        btn.classList.add('added');

        setTimeout(() => {
            btn.textContent = '+';
            btn.classList.remove('added');
        }, 1500);

        // Update the count in navigation
        updateShoppingCount();
    }
}
</script>
    </main>

    <footer class="site-footer">
        <p>&copy; 2025 My Recipe Collection</p>
    </footer>

    <script>
    // Hamburger menu toggle
    document.addEventListener('DOMContentLoaded', function() {
        const menuToggle = document.getElementById('menu-toggle');
        const navLinks = document.getElementById('nav-links');

        if (menuToggle) {
            menuToggle.addEventListener('click', function() {
                navLinks.classList.toggle('active');
            });

            // Close menu when clicking outside
            document.addEventListener('click', function(event) {
                if (!menuToggle.contains(event.target) && !navLinks.contains(event.target)) {
                    navLinks.classList.remove('active');
                }
            });

            // Close menu when clicking a link
            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    navLinks.classList.remove('active');
                });
            });
        }
    });

    // Update shopping list count in navigation
    function updateShoppingCount() {
        const list = JSON.parse(localStorage.getItem('shoppingList') || '{}');
        const count = Object.keys(list).length;
        const countElement = document.getElementById('shopping-count');

        if (countElement) {
            if (count > 0) {
                countElement.textContent = count;
                countElement.style.display = 'inline-flex';
            } else {
                countElement.style.display = 'none';
            }
        }
    }

    // Update count on page load
    document.addEventListener('DOMContentLoaded', updateShoppingCount);

    // Listen for storage changes (updates from other tabs)
    window.addEventListener('storage', (e) => {
        if (e.key === 'shoppingList') {
            updateShoppingCount();
        }
    });
    </script>
</body>
</html>