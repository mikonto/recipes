<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avocado Pasta à la Alexander Gullichsen | My Recipe Collection</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header class="site-header">
        <nav class="nav">
            <a href="/" class="nav-logo">My Recipes</a>
            <div class="nav-links">
                <a href="/">All Recipes</a>
                <a href="/shopping-list" class="shopping-list-link">
                    Shopping List
                    <span class="shopping-count" id="shopping-count"></span>
                </a>
                
                <div class="screen-toggle-nav">
                    <input type="checkbox" id="screenAwake" />
                    <label for="screenAwake">Keep screen on</label>
                </div>
                
            </div>
        </nav>
    </header>

    <main class="main-content">
        <article class="recipe">
    <header class="recipe-header">
        <h1 class="recipe-title">Avocado Pasta à la Alexander Gullichsen</h1>
        

        <div class="recipe-meta">
            
                <span class="meta-item">
                    <strong>Prep:</strong> 15 min
                </span>
            
            
                <span class="meta-item">
                    <strong>Cook:</strong> 10 min
                </span>
            
            
                <span class="meta-item">
                    <strong>Servings:</strong> 4
                </span>
            
        </div>

        
        <div class="recipe-tags">
            
                
            
                
                    <a href="/tags/pasta/" class="tag">pasta</a>
                
            
                
                    <a href="/tags/vegetarian/" class="tag">vegetarian</a>
                
            
                
                    <a href="/tags/quick/" class="tag">quick</a>
                
            
        </div>
        

    </header>

    <div class="recipe-content">
        <section class="ingredients">
            <h2>Ingredients</h2>
            
                <ul class="ingredient-list">
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-1">
                            <label for="ing-1">1 garlic clove</label>
                            <button class="add-to-list" onclick="addToShoppingList('1 garlic clove')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-2">
                            <label for="ing-2">½ red chili pepper (seeds removed)</label>
                            <button class="add-to-list" onclick="addToShoppingList('½ red chili pepper (seeds removed)')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-3">
                            <label for="ing-3">1 lime</label>
                            <button class="add-to-list" onclick="addToShoppingList('1 lime')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-4">
                            <label for="ing-4">2 ripe avocados</label>
                            <button class="add-to-list" onclick="addToShoppingList('2 ripe avocados')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-5">
                            <label for="ing-5">Salt to taste</label>
                            <button class="add-to-list" onclick="addToShoppingList('Salt to taste')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-6">
                            <label for="ing-6">Black pepper to taste</label>
                            <button class="add-to-list" onclick="addToShoppingList('Black pepper to taste')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-7">
                            <label for="ing-7">50 ml olive oil</label>
                            <button class="add-to-list" onclick="addToShoppingList('50 ml olive oil')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-8">
                            <label for="ing-8">1 handful fresh basil</label>
                            <button class="add-to-list" onclick="addToShoppingList('1 handful fresh basil')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-9">
                            <label for="ing-9">1 handful fresh parsley (or coriander as alternative)</label>
                            <button class="add-to-list" onclick="addToShoppingList('1 handful fresh parsley (or coriander as alternative)')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-10">
                            <label for="ing-10">30g (100 ml) grated Pecorino Romano cheese</label>
                            <button class="add-to-list" onclick="addToShoppingList('30g (100 ml) grated Pecorino Romano cheese')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-11">
                            <label for="ing-11">30g (100 ml) grated Parmesan cheese</label>
                            <button class="add-to-list" onclick="addToShoppingList('30g (100 ml) grated Parmesan cheese')" title="Add to shopping list">+</button>
                        </li>
                    
                        <li class="ingredient-item">
                            <input type="checkbox" id="ing-12">
                            <label for="ing-12">400-500g spaghetti</label>
                            <button class="add-to-list" onclick="addToShoppingList('400-500g spaghetti')" title="Add to shopping list">+</button>
                        </li>
                    
                </ul>
            
        </section>

        
        <section class="instructions">
            <h2>Instructions</h2>
            <ol class="instruction-list">
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Prepare the sauce directly in your serving bowl to avoid extra washing up. Finely chop the garlic (1 clove) and chili (½ pepper) and place them in the bowl.">Prepare the sauce directly in your serving bowl to avoid extra washing up. Finely chop the garlic (1 clove) and chili (½ pepper) and place them in the bowl.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Squeeze the lime juice (1 lime) into the bowl with the garlic and chili.">Squeeze the lime juice (1 lime) into the bowl with the garlic and chili.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Prepare the avocados (2 avocados): Cut them in half, remove the stones, and dice the flesh while still in the skin. Scoop out the diced avocado with a spoon into the serving bowl.">Prepare the avocados (2 avocados): Cut them in half, remove the stones, and dice the flesh while still in the skin. Scoop out the diced avocado with a spoon into the serving bowl.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Add seasonings and herbs: Finely chop the basil and parsley (1 handful each), grate both cheeses (30g each), then add these to the bowl along with salt, black pepper, and olive oil (50 ml).">Add seasonings and herbs: Finely chop the basil and parsley (1 handful each), grate both cheeses (30g each), then add these to the bowl along with salt, black pepper, and olive oil (50 ml).</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Mix and taste: Stir everything together with a spoon and taste. The sauce must have enough salt - if not, the final result will be bland.">Mix and taste: Stir everything together with a spoon and taste. The sauce must have enough salt - if not, the final result will be bland.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Cook the pasta: Boil the spaghetti (400-500g) in well-salted water (it should taste like seawater) until al dente - about 80% of the cooking time stated on the package. Reserve about 100 ml of the pasta cooking water before draining.">Cook the pasta: Boil the spaghetti (400-500g) in well-salted water (it should taste like seawater) until al dente - about 80% of the cooking time stated on the package. Reserve about 100 ml of the pasta cooking water before draining.</span>
                    </li>
                
                    <li class="instruction-item">
                        <span class="instruction-text" data-original="Combine: Drain the pasta and add it to the serving bowl with the avocado sauce. Add a splash of the reserved pasta cooking water (100 ml) to help bind everything together. Toss the spaghetti with the sauce until well coated.">Combine: Drain the pasta and add it to the serving bowl with the avocado sauce. Add a splash of the reserved pasta cooking water (100 ml) to help bind everything together. Toss the spaghetti with the sauce until well coated.</span>
                    </li>
                
            </ol>
        </section>
        

        
        <section class="notes">
            <h2>Notes</h2>
            <div class="notes-content"><p>Make sure your avocados are perfectly ripe - if they're not, save this recipe for another day as it won't work properly with unripe avocados. All ingredients should be at room temperature before mixing to prevent the cold ingredients from cooling down the warm pasta.</p>
</div>
        </section>
        
    </div>

    <nav class="recipe-nav">
        <a href="/" class="btn btn-back">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
            </svg>
            Back to all recipes
        </a>
    </nav>
</article>

<script>
// Wake Lock API to keep screen on
let wakeLock = null;

async function requestWakeLock() {
    try {
        if ('wakeLock' in navigator) {
            wakeLock = await navigator.wakeLock.request('screen');
            console.log('Screen wake lock active');

            // Re-acquire lock if page becomes visible again
            document.addEventListener('visibilitychange', async () => {
                if (wakeLock !== null && document.visibilityState === 'visible') {
                    wakeLock = await navigator.wakeLock.request('screen');
                }
            });
        } else {
            console.log('Wake Lock API not supported');
            // Hide toggle if not supported
            document.querySelector('.screen-toggle').style.display = 'none';
        }
    } catch (err) {
        console.error(`Wake lock error: ${err.message}`);
    }
}

async function releaseWakeLock() {
    if (wakeLock !== null) {
        await wakeLock.release();
        wakeLock = null;
        console.log('Screen wake lock released');
    }
}

// Handle toggle
const screenToggle = document.getElementById('screenAwake');
if (screenToggle) {
    // Check if Wake Lock API is supported
    if (!('wakeLock' in navigator)) {
        document.querySelector('.screen-toggle').style.display = 'none';
    }

    screenToggle.addEventListener('change', async (e) => {
        if (e.target.checked) {
            await requestWakeLock();
        } else {
            await releaseWakeLock();
        }
    });
}

// Shopping list functionality for individual ingredients
function addToShoppingList(ingredient) {
    const recipeName = "Avocado Pasta à la Alexander Gullichsen";

    // Get existing list
    const list = JSON.parse(localStorage.getItem('shoppingList') || '{}');

    // Create unique key
    const key = `${recipeName}-${ingredient}`;

    // Get the button that was clicked
    const btn = event.target;

    if (list[key]) {
        // Already in list - show feedback
        btn.textContent = '✓';
        btn.classList.add('added');
        setTimeout(() => {
            btn.textContent = '+';
            btn.classList.remove('added');
        }, 1500);
    } else {
        // Add to list
        list[key] = {
            recipe: recipeName,
            ingredient: ingredient,
            checked: false
        };

        // Save updated list
        localStorage.setItem('shoppingList', JSON.stringify(list));

        // Show success feedback
        btn.textContent = '✓';
        btn.classList.add('added');

        setTimeout(() => {
            btn.textContent = '+';
            btn.classList.remove('added');
        }, 1500);

        // Update the count in navigation
        updateShoppingCount();
    }
}
</script>
    </main>

    <footer class="site-footer">
        <p>&copy; 2025 My Recipe Collection</p>
    </footer>

    <script>
    // Update shopping list count in navigation
    function updateShoppingCount() {
        const list = JSON.parse(localStorage.getItem('shoppingList') || '{}');
        const count = Object.keys(list).length;
        const countElement = document.getElementById('shopping-count');

        if (countElement) {
            if (count > 0) {
                countElement.textContent = count;
                countElement.style.display = 'inline-flex';
            } else {
                countElement.style.display = 'none';
            }
        }
    }

    // Update count on page load
    document.addEventListener('DOMContentLoaded', updateShoppingCount);

    // Listen for storage changes (updates from other tabs)
    window.addEventListener('storage', (e) => {
        if (e.key === 'shoppingList') {
            updateShoppingCount();
        }
    });
    </script>
</body>
</html>